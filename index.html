<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>2048 DELUXE - The Ultimate Edition</title>
    <link rel="stylesheet" href="style.css?v=1734970000">
    <link rel="stylesheet" href="easter-eggs.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title-section">
                <h1>2048 <span class="deluxe">DELUXE</span></h1>
                <p class="subtitle">Join the tiles, get to 2048!</p>
            </div>
            <div class="scores">
                <div class="score-container">
                    <div class="score-label">SCORE</div>
                    <div class="score-value" id="score">0</div>
                    <div class="score-addition" id="score-addition"></div>
                </div>
                <div class="score-container">
                    <div class="score-label">BEST</div>
                    <div class="score-value" id="best-score">0</div>
                </div>
                <button class="achievement-btn" onclick="game.toggleAchievements()" title="View Achievements">
                    üèÜ <span id="achievement-count">0/7</span>
                </button>
                <button class="stats-btn" onclick="game.toggleStatistics()" title="View Statistics">
                    üìä
                </button>
                <button class="sound-btn" id="sound-toggle" onclick="game.toggleSound()" title="Toggle Sound">
                    üîä
                </button>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="new-game">New Game</button>
            <div class="grid-size-selector">
                <span class="grid-size-label">Grid:</span>
                <button class="grid-size-btn active" data-size="4" onclick="game.changeGridSize(4)">4√ó4</button>
                <button class="grid-size-btn" data-size="5" onclick="game.changeGridSize(5)">5√ó5</button>
            </div>
            <div class="game-status" id="game-status"></div>
        </div>

        <!-- Theme Selector (moved above powerups) -->
        <div class="theme-selector" id="theme-selector" style="display: none;">
            <h3>üé® Themes</h3>
            <div class="theme-buttons">
                <button class="theme-button" data-theme="default">
                    <span class="theme-icon">üåü</span>
                    <span class="theme-name">Default</span>
                </button>
                <button class="theme-button locked" data-theme="cyberpunk">
                    <span class="theme-icon">üåÜ</span>
                    <span class="theme-name">Cyberpunk</span>
                    <span class="lock-icon">üîí</span>
                </button>
                <button class="theme-button locked" data-theme="vaporwave">
                    <span class="theme-icon">üåä</span>
                    <span class="theme-name">Vaporwave</span>
                    <span class="lock-icon">üîí</span>
                </button>
                <button class="theme-button locked" data-theme="matrix">
                    <span class="theme-icon">üíö</span>
                    <span class="theme-name">Matrix</span>
                    <span class="lock-icon">üîí</span>
                </button>
            </div>
        </div>

        <!-- Power-ups Section (moved below themes) -->
        <div class="powerups">
            <div class="powerup-item" id="swap-btn" title="Swap any two tiles">
                <div class="powerup-icon">üîÑ</div>
                <div class="powerup-name">Swap</div>
                <div class="powerup-count" id="swap-count">0</div>
            </div>
            <div class="powerup-item" id="lock-btn" title="Lock a tile for 3 moves">
                <div class="powerup-icon">üîí</div>
                <div class="powerup-name">Lock</div>
                <div class="powerup-count" id="lock-count">0</div>
            </div>
            <div class="powerup-item" id="undo-btn" title="Undo last move">
                <div class="powerup-icon">‚Ü∂</div>
                <div class="powerup-name">Undo</div>
                <div class="powerup-count" id="undo-count">3</div>
            </div>
            <div class="powerup-item" id="shuffle-btn" title="Shuffle tiles">
                <div class="powerup-icon">üîÄ</div>
                <div class="powerup-name">Shuffle</div>
                <div class="powerup-count" id="shuffle-count">2</div>
            </div>
            <div class="powerup-item" id="remove-btn" title="Remove any tile">
                <div class="powerup-icon">üóëÔ∏è</div>
                <div class="powerup-name">Remove</div>
                <div class="powerup-count" id="remove-count">2</div>
            </div>
            <div class="powerup-item" id="double-btn" title="Double any tile's value">
                <div class="powerup-icon">‚ú®</div>
                <div class="powerup-name">Double</div>
                <div class="powerup-count" id="double-count">0</div>
            </div>
        </div>

        <!-- Game Board -->
        <div class="game-container">
            <div class="grid-container" id="grid-container"></div>
            <div class="tile-container" id="tile-container"></div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <p><strong>How to play:</strong> Use arrow keys (‚Üë ‚Üì ‚Üê ‚Üí) or swipe to move tiles. 
            When two tiles with the same number touch, they merge into one!</p>
            <p><strong>Power-ups:</strong> Earn power-ups by creating tiles! 
            32=Swap, 64=Lock, 128=Undo, 256=Shuffle, 512=Remove, 1024=Double, 2048=Bonus!</p>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 id="modal-title">Game Over!</h2>
            <p id="modal-message">No more moves available</p>
            <div class="modal-score">
                <div>Final Score: <span id="final-score">0</span></div>
                <div id="new-best" style="display: none;">üéâ New Best Score! üéâ</div>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-success" id="modal-continue" style="display: none;">Continue Playing</button>
                <button class="btn btn-primary" id="modal-undo">Undo Last Move</button>
                <button class="btn btn-primary" id="modal-new-game">New Game</button>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal">
        <div class="modal-content achievements-modal">
            <div class="modal-header">
                <h2>üèÜ Achievements</h2>
                <button class="modal-close" onclick="game.toggleAchievements()">√ó</button>
            </div>
            
            <!-- Achievement Progress Tracker -->
            <div class="achievement-progress-tracker" id="achievement-progress-tracker" style="display: block; margin-bottom: 20px;">
                <div class="tracker-header">
                    <span class="tracker-title">üéØ Achievement Progress</span>
                    <button class="tracker-toggle" onclick="game.toggleProgressTracker()" title="Toggle Tracker">‚àí</button>
                </div>
                <div class="tracker-content" id="tracker-content">
                    <div class="progress-item" id="progress-speedDemon">
                        <div class="progress-info">
                            <span class="progress-icon">‚ö°</span>
                            <span class="progress-name">Speed Demon</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-speedDemon"></div>
                            <span class="progress-text" id="text-speedDemon">0/150 moves</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-minimalist">
                        <div class="progress-info">
                            <span class="progress-icon">üéØ</span>
                            <span class="progress-name">Minimalist</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-minimalist"></div>
                            <span class="progress-text" id="text-minimalist">0/5 powerups</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-noUndo">
                        <div class="progress-info">
                            <span class="progress-icon">üö´</span>
                            <span class="progress-name">No Undo</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-noUndo"></div>
                            <span class="progress-text" id="text-noUndo">‚úì Clean</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-lockMaster">
                        <div class="progress-info">
                            <span class="progress-icon">üîí</span>
                            <span class="progress-name">Lock Master</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-lockMaster"></div>
                            <span class="progress-text" id="text-lockMaster">0/10 locks</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-swapExpert">
                        <div class="progress-info">
                            <span class="progress-icon">üîÑ</span>
                            <span class="progress-name">Swap Expert</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-swapExpert"></div>
                            <span class="progress-text" id="text-swapExpert">0/25 swaps</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-hoarder">
                        <div class="progress-info">
                            <span class="progress-icon">üí∞</span>
                            <span class="progress-name">Hoarder</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-hoarder"></div>
                            <span class="progress-text" id="text-hoarder">Collecting...</span>
                        </div>
                    </div>
                    <div class="progress-item" id="progress-perfectGame">
                        <div class="progress-info">
                            <span class="progress-icon">üíé</span>
                            <span class="progress-name">Perfect Game</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="bar-perfectGame"></div>
                            <span class="progress-text" id="text-perfectGame">‚úì Clean</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="achievements-list" class="achievements-list">
                <!-- Achievement cards will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statistics-modal" class="modal">
        <div class="modal-content statistics-modal">
            <div class="modal-header">
                <h2>üìä Statistics</h2>
                <button class="modal-close" onclick="game.toggleStatistics()">√ó</button>
            </div>
            
            <div class="stats-grid">
                <!-- Game Statistics -->
                <div class="stat-section">
                    <h3>üéÆ Game Stats</h3>
                    <div class="stat-item">
                        <span class="stat-label">Games Played</span>
                        <span class="stat-value" id="stat-games-played">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Games Won</span>
                        <span class="stat-value" id="stat-games-won">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Win Rate</span>
                        <span class="stat-value" id="stat-win-rate">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Current Streak</span>
                        <span class="stat-value" id="stat-current-streak">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Longest Streak</span>
                        <span class="stat-value" id="stat-longest-streak">0</span>
                    </div>
                </div>

                <!-- Score Statistics -->
                <div class="stat-section">
                    <h3>üéØ Score Stats</h3>
                    <div class="stat-item">
                        <span class="stat-label">Total Score</span>
                        <span class="stat-value" id="stat-total-score">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Average Score</span>
                        <span class="stat-value" id="stat-average-score">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Highest Tile</span>
                        <span class="stat-value" id="stat-highest-tile">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Moves</span>
                        <span class="stat-value" id="stat-total-moves">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Merges</span>
                        <span class="stat-value" id="stat-total-merges">0</span>
                    </div>
                </div>

                <!-- Powerup & Time Statistics -->
                <div class="stat-section">
                    <h3>‚ö° Powerup & Time</h3>
                    <div class="stat-item">
                        <span class="stat-label">Powerups Used</span>
                        <span class="stat-value" id="stat-total-powerups">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Play Time</span>
                        <span class="stat-value" id="stat-play-time">0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Fastest Win</span>
                        <span class="stat-value" id="stat-fastest-win">N/A</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-footer">
                <button class="btn btn-danger" onclick="game.resetStatistics()">Reset Statistics</button>
            </div>
        </div>
    </div>

    <!-- Dev Console (Easter Egg) -->
    <div id="dev-console" class="dev-console">
        <div class="dev-console-header">
            <h3>üõ†Ô∏è Developer Console</h3>
            <button onclick="game.toggleDevConsole()" class="close-btn">√ó</button>
        </div>
        <div class="dev-console-content">
            <div class="dev-section">
                <h4>üéÆ Powerups</h4>
                <div class="dev-buttons">
                    <button onclick="game.devAddPowerup('undo')">+5 Undo</button>
                    <button onclick="game.devAddPowerup('swap')">+5 Swap</button>
                    <button onclick="game.devAddPowerup('lock')">+5 Lock</button>
                    <button onclick="game.devAddPowerup('shuffle')">+5 Shuffle</button>
                    <button onclick="game.devAddPowerup('remove')">+5 Remove</button>
                    <button onclick="game.devAddPowerup('double')">+5 Double</button>
                </div>
            </div>
            
            <div class="dev-section">
                <h4>üìê Grid Size</h4>
                <div class="dev-buttons">
                    <button onclick="game.devSetGridSize(4)">4x4 Grid</button>
                    <button onclick="game.devSetGridSize(5)">5x5 Grid</button>
                    <button onclick="game.devSetGridSize(6)">6x6 Grid</button>
                </div>
            </div>
            
            <div class="dev-section">
                <h4>üé® Themes</h4>
                <div class="dev-buttons">
                    <button onclick="game.devUnlockTheme('cyberpunk')">Unlock Cyberpunk</button>
                    <button onclick="game.devUnlockTheme('vaporwave')">Unlock Vaporwave</button>
                    <button onclick="game.devUnlockTheme('matrix')">Unlock Matrix</button>
                </div>
            </div>
            
            <div class="dev-section">
                <h4>üß™ Spawn Tiles</h4>
                <div class="dev-buttons">
                    <button onclick="game.devSpawnTile(1024)">Spawn 1024</button>
                    <button onclick="game.devSpawnTile(2048)">Spawn 2048</button>
                    <button onclick="game.devSpawnTile(4096)">Spawn 4096</button>
                    <button onclick="game.devSpawnTile(8192)">Spawn 8192</button>
                </div>
            </div>
            
            <div class="dev-section">
                <h4>üèÜ Achievements</h4>
                <div class="dev-buttons">
                    <button onclick="game.devUnlockAllAchievements()">Unlock All Achievements</button>
                </div>
            </div>
            
            <div class="dev-warning">
                ‚ö†Ô∏è Using dev tools may affect achievements and statistics
            </div>
        </div>
    </div>

    <script src="game.js?v=1734972000"></script>
    <script>
        // Setup theme button listeners
        document.addEventListener('DOMContentLoaded', () => {
            const themeButtons = document.querySelectorAll('.theme-button');
            themeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const themeName = button.dataset.theme;
                    if (game && game.themes[themeName]?.unlocked) {
                        game.switchTheme(themeName);
                    }
                });
            });
            
            // Setup volume slider if it exists
            const volumeSlider = document.getElementById('volume-slider');
            if (volumeSlider) {
                volumeSlider.addEventListener('input', (e) => {
                    if (game) {
                        game.setVolume(e.target.value / 100);
                    }
                });
            }
        });
    </script>
</body>
</html>
