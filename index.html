<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>2048 DELUXE - The Ultimate Edition</title>
    <link rel="stylesheet" href="style.css?v=1734970000">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title-section">
                <h1>2048 <span class="deluxe">DELUXE</span></h1>
                <p class="subtitle">Join the tiles, get to 2048!</p>
            </div>
            <div class="scores">
                <div class="score-container">
                    <div class="score-label">SCORE</div>
                    <div class="score-value" id="score">0</div>
                    <div class="score-addition" id="score-addition"></div>
                </div>
                <div class="score-container">
                    <div class="score-label">BEST</div>
                    <div class="score-value" id="best-score">0</div>
                </div>
                <button class="achievement-btn" onclick="game.toggleAchievements()" title="View Achievements">
                    ğŸ† <span id="achievement-count">0/7</span>
                </button>
                <button class="stats-btn" onclick="game.toggleStatistics()" title="View Statistics">
                    ğŸ“Š
                </button>
                <button class="sound-btn" id="sound-toggle" onclick="game.toggleSound()" title="Toggle Sound">
                    ğŸ”Š
                </button>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="new-game">New Game</button>
            <div class="grid-size-selector">
                <span class="grid-size-label">Grid:</span>
                <button class="grid-size-btn active" data-size="4" onclick="game.changeGridSize(4)">4Ã—4</button>
                <button class="grid-size-btn" data-size="5" onclick="game.changeGridSize(5)">5Ã—5</button>
            </div>
            <div class="game-status" id="game-status"></div>
        </div>

        <!-- Power-ups Section -->
        <div class="powerups">
            <div class="powerup-item" id="swap-btn" title="Swap any two tiles">
                <div class="powerup-icon">ğŸ”„</div>
                <div class="powerup-name">Swap</div>
                <div class="powerup-count" id="swap-count">0</div>
            </div>
            <div class="powerup-item" id="lock-btn" title="Lock a tile for 3 moves">
                <div class="powerup-icon">ğŸ”’</div>
                <div class="powerup-name">Lock</div>
                <div class="powerup-count" id="lock-count">0</div>
            </div>
            <div class="powerup-item" id="undo-btn" title="Undo last move">
                <div class="powerup-icon">â†¶</div>
                <div class="powerup-name">Undo</div>
                <div class="powerup-count" id="undo-count">3</div>
            </div>
            <div class="powerup-item" id="shuffle-btn" title="Shuffle tiles">
                <div class="powerup-icon">ğŸ”€</div>
                <div class="powerup-name">Shuffle</div>
                <div class="powerup-count" id="shuffle-count">2</div>
            </div>
            <div class="powerup-item" id="remove-btn" title="Remove any tile">
                <div class="powerup-icon">ğŸ—‘ï¸</div>
                <div class="powerup-name">Remove</div>
                <div class="powerup-count" id="remove-count">2</div>
            </div>
            <div class="powerup-item" id="double-btn" title="Double any tile's value">
                <div class="powerup-icon">âœ¨</div>
                <div class="powerup-name">Double</div>
                <div class="powerup-count" id="double-count">0</div>
            </div>
        </div>

        <!-- Theme Selector -->
        <div class="theme-selector" id="theme-selector" style="display: none;">
            <h3>ğŸ¨ Themes</h3>
            <div class="theme-buttons">
                <button class="theme-button" data-theme="default">
                    <span class="theme-icon">ğŸŒŸ</span>
                    <span class="theme-name">Default</span>
                </button>
                <button class="theme-button locked" data-theme="cyberpunk">
                    <span class="theme-icon">ğŸŒ†</span>
                    <span class="theme-name">Cyberpunk</span>
                    <span class="lock-icon">ğŸ”’</span>
                </button>
                <button class="theme-button locked" data-theme="vaporwave">
                    <span class="theme-icon">ğŸŒŠ</span>
                    <span class="theme-name">Vaporwave</span>
                    <span class="lock-icon">ğŸ”’</span>
                </button>
                <button class="theme-button locked" data-theme="matrix">
                    <span class="theme-icon">ğŸ’š</span>
                    <span class="theme-name">Matrix</span>
                    <span class="lock-icon">ğŸ”’</span>
                </button>
            </div>
        </div>

        <!-- Game Board -->
        <div class="game-container">
            <div class="grid-container" id="grid-container"></div>
            <div class="tile-container" id="tile-container"></div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <p><strong>How to play:</strong> Use arrow keys (â†‘ â†“ â† â†’) or swipe to move tiles. 
            When two tiles with the same number touch, they merge into one!</p>
            <p><strong>Power-ups:</strong> Earn power-ups by creating tiles! 
            32=Swap, 64=Lock, 128=Undo, 256=Shuffle, 512=Remove, 1024=Double, 2048=Bonus!</p>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 id="modal-title">Game Over!</h2>
            <p id="modal-message">No more moves available</p>
            <div class="modal-score">
                <div>Final Score: <span id="final-score">0</span></div>
                <div id="new-best" style="display: none;">ğŸ‰ New Best Score! ğŸ‰</div>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-success" id="modal-continue" style="display: none;">Continue Playing</button>
                <button class="btn btn-primary" id="modal-undo">Undo Last Move</button>
                <button class="btn btn-primary" id="modal-new-game">New Game</button>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal">
        <div class="modal-content achievements-modal">
            <div class="modal-header">
                <h2>ğŸ† Achievements</h2>
                <button class="modal-close" onclick="game.toggleAchievements()">Ã—</button>
            </div>
            <div id="achievements-list" class="achievements-list">
                <!-- Achievement cards will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statistics-modal" class="modal">
        <div class="modal-content statistics-modal">
            <div class="modal-header">
                <h2>ğŸ“Š Statistics</h2>
                <button class="modal-close" onclick="game.toggleStatistics()">Ã—</button>
            </div>
            
            <div class="stats-grid">
                <!-- Game Statistics -->
                <div class="stat-section">
                    <h3>ğŸ® Game Stats</h3>
                    <div class="stat-item">
                        <span class="stat-label">Games Played</span>
                        <span class="stat-value" id="stat-games-played">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Games Won</span>
                        <span class="stat-value" id="stat-games-won">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Win Rate</span>
                        <span class="stat-value" id="stat-win-rate">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Current Streak</span>
                        <span class="stat-value" id="stat-current-streak">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Longest Streak</span>
                        <span class="stat-value" id="stat-longest-streak">0</span>
                    </div>
                </div>

                <!-- Score Statistics -->
                <div class="stat-section">
                    <h3>ğŸ¯ Score Stats</h3>
                    <div class="stat-item">
                        <span class="stat-label">Total Score</span>
                        <span class="stat-value" id="stat-total-score">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Average Score</span>
                        <span class="stat-value" id="stat-average-score">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Highest Tile</span>
                        <span class="stat-value" id="stat-highest-tile">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Moves</span>
                        <span class="stat-value" id="stat-total-moves">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Merges</span>
                        <span class="stat-value" id="stat-total-merges">0</span>
                    </div>
                </div>

                <!-- Powerup & Time Statistics -->
                <div class="stat-section">
                    <h3>âš¡ Powerup & Time</h3>
                    <div class="stat-item">
                        <span class="stat-label">Powerups Used</span>
                        <span class="stat-value" id="stat-total-powerups">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Play Time</span>
                        <span class="stat-value" id="stat-play-time">0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Fastest Win</span>
                        <span class="stat-value" id="stat-fastest-win">N/A</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-footer">
                <button class="btn btn-danger" onclick="game.resetStatistics()">Reset Statistics</button>
            </div>
        </div>
    </div>

    <script src="game.js?v=1734972000"></script>
    <script>
        // Setup theme button listeners
        document.addEventListener('DOMContentLoaded', () => {
            const themeButtons = document.querySelectorAll('.theme-button');
            themeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const themeName = button.dataset.theme;
                    if (game && game.themes[themeName]?.unlocked) {
                        game.switchTheme(themeName);
                    }
                });
            });
            
            // Setup volume slider if it exists
            const volumeSlider = document.getElementById('volume-slider');
            if (volumeSlider) {
                volumeSlider.addEventListener('input', (e) => {
                    if (game) {
                        game.setVolume(e.target.value / 100);
                    }
                });
            }
        });
    </script>
</body>
</html>
